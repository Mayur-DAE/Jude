<!-- Modal starts -->
<div class="modal fade" id="offersModal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">

  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{ModalTitle}}</h5>

        <button type="button" class="btn btn-primary btn-rounded btn-icon" data-bs-dismiss="modal" aria-label="Close"
          (click)="closeClick()">
          <i class="ti-close"></i>
        </button>
      </div>
      <app-add-edit-offers 
      [offer]="offer" 
      [isEditMode]="isEditMode" 
      (emitData)="emittedDataByChild($event)" 
      *ngIf="ActiveAddEditOffersComp">
    </app-add-edit-offers>
    
    </div>
  </div>
</div>
<!-- Modal Ends -->
<div class="card">
  <div class="card-body">
    <h4 class="card-title">Offers</h4>
    <div class="row">
      <div class="col-12">
        <!-- Add Offer Button -->
        <div class="text-left">
          <button type="button" class="btn btn-primary btn-icon-text" (click)="addClick()" data-bs-toggle="modal"
            data-bs-target="#offersModal">
            <i class="ti-plus"></i> Add
          </button>
        </div>
      <br />
        <div>
          <!-- <div class="justify-content-end d-flex">
            <button type="button" class="export-btn btn fa fa-file-excel-o mt-4 ms-2 excelbutton"
              (click)="exportToExcel()">
              <i class="ti-file me-1"></i>Export to Excel</button>
          </div> -->
          <div class="row mb-3 mt-2">
            <div class="col-md-6 col-sm-12 d-flex align-items-center ">
              <label for="itemsPerPage" class="mr-2">Items per page:&nbsp;</label>
              <select id="itemsPerPage" class="border rounded px-2 py-1" (change)="onItemsPerPageChange($event)">
                <option value="5" [selected]="itemsPerPage === 5">5</option>
                <option value="10" [selected]="itemsPerPage === 10">10</option>
                <option value="20" [selected]="itemsPerPage === 20">20</option>
                <option value="30" [selected]="itemsPerPage === 30">30</option>
              </select>
            </div>
            <div class="col-md-6 col-sm-12 d-flex justify-content-end">
              <button type="button" class="export-btn btn fa fa-file-excel-o excelbutton mt-2 md:mt-0" (click)="exportToExcel()" style="padding: 0px !important;">
                <i class="ti-file me-1"></i>Export to Excel
              </button>
            </div>
          </div> 

        </div>
        <div class="col-sm-12 row">
          <div class="table-responsive">
            <table id="show-offer" class="table">
              <thead>
                <tr class="bg-primary text-white">
                  <th>Name</th>
                  <th>Shop Name</th>
                  <th>Description</th>
                  <th>Start Date</th>
                  <th>End Date</th>
                  <th>Discount</th>
                  <th style="text-align: center;">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let dataItem of paginatedOffers">
                  <td>{{dataItem.OfferName}}</td>
                  <td>{{dataItem.CompanyName}}</td>
                  <td>{{dataItem.OfferDescription}}</td>
                  <td>{{dataItem.OfferStartDate}}</td>
                  <td>{{dataItem.OfferEndDate}}</td>
                  <!-- <td>{{currency}} {{dataItem.OfferDiscount | number:'1.2-2'}}</td> -->
                   <td class="action23" *ngIf="dataItem.OfferDiscountType=='value'">
                    {{currency}} {{ dataItem.OfferDiscount | number:'1.2-2'}}
                  </td>
                  <td class="action23" *ngIf="dataItem.OfferDiscountType=='percentage'">
                    {{ dataItem.OfferDiscount | number:'1.2-2'}} %
                  </td>
                  <td class="action23" *ngIf="dataItem.OfferDiscountType != 'percentage' && dataItem.OfferDiscountType != 'value'">
                    {{currency}} {{ dataItem.OfferDiscount | number:'1.2-2'}}
                  </td>
                  <td style="width: 70px;">
                    <button type="button" class="btn btn-light" (click)="editClick(dataItem)" data-bs-toggle="modal"
                      data-bs-target="#offersModal">
                      Edit<i class="ti-pencil ms-1"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mt-3  px-md-4"><!-- px-3 -->
            <span class="text-muted mb-2 mb-md-0">
              Showing 
              {{ (currentPage - 1) * itemsPerPage + 1 }} 
              to 
              {{ min(currentPage * itemsPerPage, OffersList.length) }} 
              of 
              {{ OffersList.length }} entries
            </span>
          
            <nav>
              <ul class="pagination mb-0">
                <!-- Previous Button -->
                <li class="page-item" [class.disabled]="currentPage === 1">
                  <a class="page-link" (click)="changePage(currentPage - 1)"><<</a>
                </li>
            
                <!-- Page 1 -->
                <li class="page-item" [class.active]="currentPage === 1">
                  <a class="page-link" (click)="changePage(1)">1</a>
                </li>
            
                <!-- Ellipsis before middle pages -->
                <li class="page-item disabled" *ngIf="getMiddlePages()[0] > 2">
                  <span class="page-link">...</span>
                </li>
            
                <!-- Middle Pages -->
                <ng-container *ngFor="let page of getMiddlePages()">
                  <li class="page-item" [class.active]="currentPage === page">
                    <a class="page-link" (click)="changePage(page)">{{ page }}</a>
                  </li>
                </ng-container>
            
                <!-- Ellipsis after middle pages -->
                <li class="page-item disabled" *ngIf="getMiddlePages().includes(totalPages - 1) === false && totalPages > 5">
                  <span class="page-link">...</span>
                </li>
            
                <!-- Last Page -->
                <li class="page-item" *ngIf="totalPages > 1" [class.active]="currentPage === totalPages">
                  <a class="page-link" (click)="changePage(totalPages)">{{ totalPages }}</a>
                </li>
            
                <!-- Next Button -->
                <li class="page-item" [class.disabled]="currentPage === totalPages">
                  <a class="page-link" (click)="changePage(currentPage + 1)">>></a>
                </li>
              </ul>
            </nav>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>